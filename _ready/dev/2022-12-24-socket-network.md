---
layout: post
title: '자바 소켓 통신'
subtitle: 클라이언트-서버 통신, 소켓통신 방법
category: dev
tags:
  - java
  - network
comments: true
published: true
---

<br/>

## 1. 클라이언트-서버 간 통신

---
   
일반적으로 서비스의 주요 데이터들은 서버에서 관리합니다.   
때문에 클라이언트에서 데이터에 대한 조회나 처리가 필요한 경우 서버와의 통신이 필연적인데요.  

이번 주제인 '소켓 통신'은 클라이언트-서버 간에 통신하는 방식 중에 하나로,  
'HTTP 통신'과 함께 많이 사용되는 방식입니다.

두 통신방식은 서로 다른 특징과 더불어 쓰임도 다른 만큼,  
HTTP 통신과의 비교를 통해 소켓에 대한 설명을 하겠습니다.

### 1-1. HTTP 통신
> 클라이언트가 요청을 보낼때만 서버와 연결되는 통신 방식

1. 클라이언트의 요청이 있을때만 서버가 응답하고 연결이 종료되는 `단방향 통신` 입니다.  
2. 연결상태를 유지하지 않기 때문에 불필요한 자원의 점유를 줄일 수 있습니다.  
3. 단발성 통신에 적합한 방식입니다.

### 1-2. 소켓 통신
> 클라이언트-서버 간 계속 연결을 유지하는 통신 방식

1. 클라이언트와 서버가 특정 Port를 통해 연결을 계속 유지하는 `양방향 통신` 입니다.  
2. 강제로 끊기 전까지 연결을 계속 유지하기 때문에, 서버에 연결되는 클라이언트 수를 제한합니다.
3. 실시간 정보교환 (ex.채팅, 스트리밍)에 적합한 방식입니다.

<br/>

## 2. 소켓과 소켓 통신
소켓은 Port를 통해 호스트끼리 데이터를 주고 받을 수 있는 데이터 통로를 만들어주는 도구입니다.  
소켓의 역할에 따라 클라이언트-소켓, 서버-소켓으로 구분되며, 통신 절차는 아래와 같습니다.

![사진] 소켓 통신 흐름

|순서|서버|클라이언트|  
|:-----:|:-----|:-----|
| 1 | **socket()** <br> - 소켓을 생성 | **socket()** <br> - 소켓을 생성 |
| 2 | **bind()** <br> - 소켓의 IP/Port 할당 | |
| 3 | **listen()** <br> - 접근을 허용 할 클라이언트 수 만큼 대기열을 만들어 요청 대기 |  |
| 4 | **socket()** <br> - 소켓을 생성 | **socket()** <br> 소켓을 생성 |
| 5 | **socket()** <br> 소켓을 생성 | **socket()** <br> 소켓을 생성 |
| 6 | **socket()** <br> 소켓을 생성 | **socket()** <br> 소켓을 생성 |
| 7 | **socket()** <br> 소켓을 생성 | **socket()** <br> 소켓을 생성 |
| 8 | **socket()** <br> 소켓을 생성 | **socket()** <br> 소켓을 생성 |
| 9 | **socket()** <br> 소켓을 생성 | **socket()** <br> 소켓을 생성 |

<br/>
<br/>

## 🔎 참고
https://sorjfkrh5078.tistory.com/122